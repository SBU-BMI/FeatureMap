<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Feature Map | QuIP - Quantitative Imaging in Pathology</title>
  <script src="getBrowser.js"></script>
  <script src="zoom2loc.js"></script>
  <script src="jmat.js"></script>

  <!-- START PATHDB STYLE -->
  <link rel="stylesheet" media="all"
    href="/sites/default/files/css/css_FB_8SamOz8_JZSZTL3QZuOwo92EVnOqapDXC3GJryXE.css?pufq19" />
  <!-- END PATHDB STYLE -->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" media="all">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <style>
    table { height: 100%; width: 100%; table-layout: static; border-collapse: collapse }
    iframe { height: 100%; width: 100% }
    .tooltip-inner {
      background-color: lightgoldenrodyellow !important;
      /*!important is not necessary if you place custom.css at the end of your css calls. For the purpose of this demo, it seems to be required in SO snippet*/
      color: #000;
    }
    .tooltip.top .tooltip-arrow { border-top-color: lightgoldenrodyellow; }
    .tooltip.right .tooltip-arrow { border-right-color: lightgoldenrodyellow; }
    .tooltip.bottom .tooltip-arrow { border-bottom-color: lightgoldenrodyellow; }
    .tooltip.left .tooltip-arrow { border-left-color: lightgoldenrodyellow; }
  </style>
  
</head>

<body class="path-frontpage large-screen">
  <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas="">
    <!-- Start: Page Wrapper -->
    <div class="page-wrapper w3-col w3-clear w3-animate-opacity w3-text-theme  ">
      <!-- Start: Header -->
      <header id="header" class="w3-col w3-clear w3-theme-l4 " role="banner" aria-label="Site header">
        <div id="header-inner" class="d8-fade w3-container header-inner "
          style="opacity: 1; transition: opacity 1s linear 0s;">
          <nav role="navigation" aria-labelledby="block-drupal8-w3css-theme-account-menu-menu"
            id="block-drupal8-w3css-theme-account-menu">

            <ul class="ul-parent ul-parent-account ul-0" role="menu">
              <li class="li-item li-item-account li-0" role="none">
                <a href="https://sbu-bmi.github.io/quip_distro/" class="w3-button li-link li-link-account">About</a>
              </li>
              <li class="li-item li-item-account li-0" role="none">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSdSt7xU4-j2m-JpFRb5nNkOEuBz212i1--svMHyuHKErNkFvA/viewform"
                  class="w3-button li-link li-link-account">Feedback</a>
              </li>
              <li class="li-item li-item-account li-0" role="none">
                <a href="/user/login" class="w3-button li-link li-link-account"
                  data-drupal-link-system-path="user/login">Log
                  in</a>
              </li>
            </ul>

          </nav>

          <section id="block-drupal8-w3css-theme-branding"
            class="w3-block w3-block-wrapper block-system block-system-branding-block">

            <div class="w3-left w3-margin-left">
              <h1 class="site-name w3-show-block">
                <a class="w3-xlarge w3-padding" href="/" title="Home" rel="home">QuIP - Quantitative Imaging in
                  Pathology</a>
              </h1>
            </div>
          </section>

        </div>
      </header>
      <!-- End: Header -->
      <!-- Start: Main Navigation -->
      <div id="main-navigation-h" class="w3-col w3-clear main-navigation-wrapper w3-card w3-theme " role="navigation"
        aria-label="Main Navigation">
        <div id="main-navigation-inner-h" class="d8-fade w3-row main-navigation-inner-h "
          style="opacity: 1; transition: opacity 1s linear 0s;">
          <i class="mobile-nav fa fa-bars w3-hide-large w3-button w3-block w3-right-align w3-xxlarge w3-theme "></i>
          <nav role="navigation" aria-labelledby="block-drupal8-w3css-theme-main-menu-menu"
            id="block-drupal8-w3css-theme-main-menu">

            <ul class="ul-parent ul-parent-main ul-0" role="menu">
              <li class="li-item li-item-main li-0" role="none">
                <a href="/" class="w3-button li-link li-link-main is-active"
                  data-drupal-link-system-path="<front>">Home</a>
              </li>
              <li class="li-item li-item-main li-0" role="none">
                <a href="/collections" class="w3-button li-link li-link-main"
                  data-drupal-link-system-path="collections">Collections</a>
              </li>
              <li class="li-item li-item-main li-0" role="none">
                <a href="/listofimages" class="w3-button li-link li-link-main"
                  data-drupal-link-system-path="listofimages">Images</a>
              </li>
              <li class="li-item li-item-main li-0" role="none">
                <a href="/maps" class="w3-button li-link li-link-main" data-drupal-link-system-path="maps">Maps</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
      <!-- End: Main Navigation -->
      <!-- Start: Highlighted -->
      <div id="highlighted" class="w3-col w3-clear w3-theme-l2 ">
        <div id="highlighted-inner" class="d8-fade w3-row highlighted-inner "
          style="opacity: 1; transition: opacity 1s linear 0s;">

        </div>
      </div>
      <!-- End: Highlighted -->
      <!-- Start: Main -->
      <div id="main-container" class="w3-col w3-clear w3-theme-l5 ">
        <div id="main-container-inner" class="w3-container main-container-inner ">
          <!-- Start Main Container  -->
          <div class="w3-col w3-clear w3-row-padding">
            <!-- Start: Main Content -->
            <div class="w3-col main-region w3css-content">
              <div id="tilmapDiv" class="container">
                <!-- button id="continueTool" style="background-color:silver;color:gray;font-size:large;vertical-align:top;border-radius:15px">Click to see TIL/tumor maps</button -->
                <table style="width: 1400px; height: 700px">
                  <tr>
                    <td style="vertical-align:top; width:600px">
                      <h3 class="w3-margin-left node__title">Feature Maps</h3><br>
                      <div>
                        <button id='btnPrev' class="w3-button w3-large w3-circle w3-light-grey">‹</button>
                        <select id="navigation-dropdown" name="navigation"></select>
                        <button id="btnNext" class="w3-button w3-large w3-circle w3-light-grey">›</button>
                      </div>
                      <p><br></p>
                      <script>
                        $('#btnPrev').click(function () {
                          let selectedOption = $('#navigation-dropdown option:selected');
                          if (selectedOption.prev().val()) {
                            location.href = selectedOption.prev().val();
                          }
                        });

                        $('#btnNext').click(function () {
                          let selectedOption = $('#navigation-dropdown option:selected');
                          if (selectedOption.next().val()) {
                            location.href = selectedOption.next().val();
                          }
                        });

                        $('#navigation-dropdown').change(function () {
                          let selectedOption = $('#navigation-dropdown option:selected');
                          if (selectedOption.val()) {
                            location.href = selectedOption.val();
                          }
                        });
                      </script>

                      <div id="tilShowImgDiv" style="color: navy;">
                        <div id="imgTILDiv" class="imgTILDiv"
                          style="width: 600px; height: 500px; max-width: 600px; max-height: 500px">
                        </div>
                      </div>
                      <div id="calcTIL">
                        <div id="calcTILdiv">
                          <p>
                            <span id="hideRGBbuttons" style="color:blue; cursor:pointer; font-size:small;">RGB[+] </span>
                            <span id="rgbButtons" hidden="true">
                              <button id="calcTILred" data-toggle="tooltip" data-placement="top" title=""></button>
                              <button id="calcTILgreen" data-toggle="tooltip" data-placement="top" title=""></button>
                              <button id="calcTILblue" data-toggle="tooltip" data-placement="top" title=""></button>
                              <button id="calcTIL0" style="background-color:white">Original PNG</button>
                              <span id="tileSize" style="font-size: small"></span>
                            </span>
                          </p>
                          <p><!-- Red -->
                            <!--span style="font-size: small; font-weight: bold">Red range values</span><br-->
                            <span id="redRangeVal" style="font-size: small"></span><br>
                            <input id="redRange" type="range" style="width:200px">
                            <button id="redRangePlay" style="background-color:silver" title="play it"></button>
                            <span style="color: navy;"><span id="redTiles" data-toggle="tooltip" data-placement="auto">counting ...</span></span>
                            </p>
                          <p><!-- Green -->
                            <!--span style="font-size: small; font-weight: bold">Green range values</span><br-->
                            <span id="greenRangeVal" style="font-size: small"></span><br>
                            <input id="greenRange" type="range" style="width:200px">
                            <button id="greenRangePlay" style="background-color:silver" title="play it"></button>
                            <span style="color: navy;"><span id="greenTiles" data-toggle="tooltip" data-placement="auto">counting ...</span></span>
                          </p>
                          <p><!-- Blue / Tissue -->
                            <!--span style="font-size: small; font-weight: bold">Blue range (tissue) values</span><br-->
                            <span id="segmentationRangeVal" style="font-size: small"></span><br>
                            <input id="segmentationRange" type="range" style="width:200px" value="0">
                            <!-- At first, the segmentation was only redone when either the button or the range are touched.
                            The point of that design was to allow for the user to change the proportions of the things segmented
                            - for example removing the Cancer 'heatmap' to highlight what is TIL.
                            But now for example when you turn the cancerRange all the way to zero, the count will also change. -->
                            <button id="rangeSegmentBt" style="background-color:silver">Bkgnd Suppr</button>
                            <span style="color: navy;"><span id="backTiles">...</span></span>
                            <br>
                            <span style="color: navy;">0 ←(segmentation threshold)→ 1</span>
                          </p>
                          <p>
                            <span id="transparencyRangeVal" style="font-size: small"></span><br>
                            <input id="transparencyRange" type="range" style="width:200px" value="20">
                            <span style="color: navy;">0 ←(segmentation transparency)→ 1</span>
                          </p>
                          <!--
                          <hr><div id="choose" class="btn" data-toggle="tooltip" data-placement="right" title="Select 3 features, then click on a 4th one, and the image will be redrawn"></div>-->
                          <div id="choose"></div>
                        </div>
                      </div>

                    </td>
                    <td style="vertical-align:top; width: 800px;">
                      <iframe id="caMicrocopeIfr" src="about:blank"></iframe>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End: Main -->
    </div>
    <!-- End: Page Wrapper -->
  </div>
  <script src="tilmap.js"></script>

</body>

</html>
